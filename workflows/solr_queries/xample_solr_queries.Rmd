## Example Solr queries

For additional examples and explanations, check out the Apache Lucene [Query Parser Syntax](https://lucene.apache.org/core/2_9_4/queryparsersyntax.html) page.

```{r echo = FALSE, warning = FALSE, message = FALSE}
library(magrittr)

cn <- dataone::CNode('PROD')
mn <- dataone::getMNode(cn,'urn:node:ARCTIC')

format_query_result <- function(query_result) {
  query_result %>% 
    knitr::kable(format = "html") %>% 
    kableExtra::kable_styling(bootstrap_options = c("striped", "hover", "condensed")) %>% 
    kableExtra::scroll_box(width = "100%",
                           height = "400px") #display concisely
}
```

### Find everything

```{r}
result <- dataone::query(mn, list(q="*:*",
                                  fl="*",
                                  rows="20"),
                         as = "data.frame")
```

### Query a wildcard expression 

```{r eval = FALSE}
#find any id that starts with arctic-data.6
result <- dataone::query(mn, list(q="id:arctic-data.6*",
                                  rows="5000"),
                         as = "data.frame")
```

### Query multiple fields 

```{r eval = FALSE}
result <- dataone::query(mn, list(q="title:soil*+AND+origin:Ludwig",
                        rows="5000"),
                        as = "data.frame")
```

```{r eval = FALSE}
result <- dataone::query(mn, list(q="title:soil* OR origin:Ludwig",
                                  rows="5000"),
                         as = "data.frame")
```

```{block, type = "note"}
You can use either spaces or `+` to separate query parameters. When typing queries in R, it's often easier to read if you use spaces. However, when using the browser, you may want to use `+` to keep the query clean. (The browser will replace spaces with `%20`.)
```

### Query multiple conditions within one field

```{r eval = FALSE}
result <- dataone::query(mn, list(q="title:(soil* AND carbo*)",
                                  rows="5000"),
                         as = "data.frame") 
```

### Use NOT in a query

Just add `-` before a query parameter!

```{r eval = FALSE}
result <- dataone::query(mn, list(q="title:(soil AND -carbon)",
                                  rows="5000"),
                         as = "data.frame")
```

### Query a coordinating node

```{r eval = FALSE}
result <- dataone::query(cn, list(q="title:soil* AND origin:Ludwig",
                                  rows="5000"),
                         as = "data.frame")
```

### Use facets

All resource maps with > 100 data objects that are _not_ on the Arctic Data Center:

```
https://cn.dataone.org/cn/v2/query/solr/?q=resourceMap:*+AND+-datasource:*ARCTIC*&rows=0&facet=true&facet.field=resourceMap&facet.mincount=100
```

<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>NCEAS Intern Training</title>
  <meta name="description" content="This is a training guide and reference resource for NCEAS interns working on the SASAP and Arctic Data Center Projects">
  <meta name="generator" content="bookdown 0.5 and GitBook 2.6.7">

  <meta property="og:title" content="NCEAS Intern Training" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a training guide and reference resource for NCEAS interns working on the SASAP and Arctic Data Center Projects" />
  <meta name="github-repo" content="rstudio/intern_training" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="NCEAS Intern Training" />
  
  <meta name="twitter:description" content="This is a training guide and reference resource for NCEAS interns working on the SASAP and Arctic Data Center Projects" />
  

<meta name="author" content="Jeanette Clark">


<meta name="date" content="2017-12-13">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="introduction.html">
<link rel="next" href="setting-other-entities.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Placeholder</a></li>
<li class="chapter" data-level="2" data-path="placeholder-1.html"><a href="placeholder-1.html"><i class="fa fa-check"></i><b>2</b> Placeholder</a></li>
<li class="chapter" data-level="3" data-path="devtoolsinstall-githubnceasarcticdatautils-ref-v0-5-0.html"><a href="devtoolsinstall-githubnceasarcticdatautils-ref-v0-5-0.html"><i class="fa fa-check"></i><b>3</b> devtools::install_github(“NCEAS/arcticdatautils”, ref = “v0.5.0”)</a><ul>
<li class="chapter" data-level="3.1" data-path="devtoolsinstall-githubnceasarcticdatautils-ref-v0-5-0.html"><a href="devtoolsinstall-githubnceasarcticdatautils-ref-v0-5-0.html#editing-packages-in-r"><i class="fa fa-check"></i><b>3.1</b> Editing packages in R</a><ul>
<li class="chapter" data-level="3.1.1" data-path="devtoolsinstall-githubnceasarcticdatautils-ref-v0-5-0.html"><a href="devtoolsinstall-githubnceasarcticdatautils-ref-v0-5-0.html#set-environment"><i class="fa fa-check"></i><b>3.1.1</b> Set environment</a></li>
<li class="chapter" data-level="3.1.2" data-path="devtoolsinstall-githubnceasarcticdatautils-ref-v0-5-0.html"><a href="devtoolsinstall-githubnceasarcticdatautils-ref-v0-5-0.html#set-token"><i class="fa fa-check"></i><b>3.1.2</b> Set token</a></li>
<li class="chapter" data-level="3.1.3" data-path="devtoolsinstall-githubnceasarcticdatautils-ref-v0-5-0.html"><a href="devtoolsinstall-githubnceasarcticdatautils-ref-v0-5-0.html#publishing-a-package-to-the-site"><i class="fa fa-check"></i><b>3.1.3</b> Publishing a package to the site</a></li>
<li class="chapter" data-level="3.1.4" data-path="devtoolsinstall-githubnceasarcticdatautils-ref-v0-5-0.html"><a href="devtoolsinstall-githubnceasarcticdatautils-ref-v0-5-0.html#edit-material"><i class="fa fa-check"></i><b>3.1.4</b> Edit material</a></li>
<li class="chapter" data-level="3.1.5" data-path="devtoolsinstall-githubnceasarcticdatautils-ref-v0-5-0.html"><a href="devtoolsinstall-githubnceasarcticdatautils-ref-v0-5-0.html#update-the-data-package-with-the-new-eml-and-file"><i class="fa fa-check"></i><b>3.1.5</b> Update the data package with the new EML and file</a></li>
<li class="chapter" data-level="3.1.6" data-path="devtoolsinstall-githubnceasarcticdatautils-ref-v0-5-0.html"><a href="devtoolsinstall-githubnceasarcticdatautils-ref-v0-5-0.html#update-metadata-with-the-otherentities-added"><i class="fa fa-check"></i><b>3.1.6</b> update metadata with the otherEntities added</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>4</b> Introduction</a></li>
<li class="chapter" data-level="5" data-path="attributes.html"><a href="attributes.html"><i class="fa fa-check"></i><b>5</b> Attributes</a><ul>
<li class="chapter" data-level="5.1" data-path="attributes.html"><a href="attributes.html#building-the-attribute-table"><i class="fa fa-check"></i><b>5.1</b> Building the attribute table</a></li>
<li class="chapter" data-level="5.2" data-path="attributes.html"><a href="attributes.html#defining-enumerated-domains"><i class="fa fa-check"></i><b>5.2</b> Defining enumerated domains</a></li>
<li class="chapter" data-level="5.3" data-path="attributes.html"><a href="attributes.html#generating-the-attribute-list-and-data-table"><i class="fa fa-check"></i><b>5.3</b> Generating the attribute list and data table</a></li>
<li class="chapter" data-level="5.4" data-path="attributes.html"><a href="attributes.html#adding-a-second-datatable"><i class="fa fa-check"></i><b>5.4</b> Adding a second dataTable</a></li>
<li class="chapter" data-level="5.5" data-path="attributes.html"><a href="attributes.html#defining-custom-units"><i class="fa fa-check"></i><b>5.5</b> Defining custom units</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="setting-other-entities.html"><a href="setting-other-entities.html"><i class="fa fa-check"></i><b>6</b> Setting other entities</a><ul>
<li class="chapter" data-level="6.1" data-path="setting-other-entities.html"><a href="setting-other-entities.html#for-files-that-arent-uploaded-yet"><i class="fa fa-check"></i><b>6.1</b> For files that aren’t uploaded yet</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="for-files-that-are-already-uploaded.html"><a href="for-files-that-are-already-uploaded.html"><i class="fa fa-check"></i><b>7</b> For files that are already uploaded</a></li>
<li class="chapter" data-level="8" data-path="coverage.html"><a href="coverage.html"><i class="fa fa-check"></i><b>8</b> Coverage</a></li>
<li class="chapter" data-level="9" data-path="methods.html"><a href="methods.html"><i class="fa fa-check"></i><b>9</b> Methods</a></li>
<li class="chapter" data-level="10" data-path="keywords.html"><a href="keywords.html"><i class="fa fa-check"></i><b>10</b> Keywords</a></li>
<li class="chapter" data-level="11" data-path="people.html"><a href="people.html"><i class="fa fa-check"></i><b>11</b> People</a></li>
<li class="chapter" data-level="12" data-path="validating-and-writing-the-eml.html"><a href="validating-and-writing-the-eml.html"><i class="fa fa-check"></i><b>12</b> Validating and Writing the EML</a></li>
<li class="chapter" data-level="13" data-path="dealing-with-unusual-cases.html"><a href="dealing-with-unusual-cases.html"><i class="fa fa-check"></i><b>13</b> Dealing with unusual cases</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">NCEAS Intern Training</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="attributes" class="section level1">
<h1><span class="header-section-number">Chapter 5</span> Attributes</h1>
<p>Since attribute information has to be added to the metadata, we’ll cover attributes first.</p>
<div id="building-the-attribute-table" class="section level2">
<h2><span class="header-section-number">5.1</span> Building the attribute table</h2>
<p>First you need to generate a dataframe with attribute information. This dataframe has rows that are attributes, and the following columns:</p>
<ul>
<li><strong>attributeName</strong>: The name of the attribute as listed in the csv. Required.</li>
<li><strong>attributeDefinition</strong>: Longer description of the attribute. Required.</li>
<li><strong>measurementScale</strong>: One of: nominal, ordinal, dateTime, ratio, interval. Required.
<ul>
<li><em>nominal</em>: unordered categories or text. eg: (Male, Female) or (Yukon River, Kuskokwim River)</li>
<li><em>ordinal</em>: ordered categories. eg: Low, Medium, High</li>
<li><em>dateTime</em>: date or time values from the Gregorian calendar. eg: 01-01-2001</li>
<li><em>ratio</em>: measurement scale with a meaningful zero point. eg: 200 Kelvin is half as hot as 400 Kelvin, 1.2 metersPerSecond is twice as fast as 0.6 metersPerSecond.</li>
<li><em>interval</em>: values from a scale with equidistant points, where the zero point is arbitrary. eg: 12.2 degrees Celsius, 21 degrees Latitude</li>
</ul></li>
<li><strong>domain</strong>: One of: textDomain, enumeratedDomain, numericDomain, dateTimeDomain. Required.
<ul>
<li><em>textDomain</em>: text that is free-form, or matches a pattern</li>
<li><em>enumeratedDomain</em>: text that belongs to a defined list of codes and definitions. eg: CASC = Cascade Lake, HEAR = Heart Lake</li>
<li><em>dateTimeDomain</em>: dateTime attributes</li>
<li><em>numericDomain</em>: attributes that are numbers (either ratio or interval)</li>
</ul></li>
<li><strong>formatString</strong>: Required for dateTimeDomain, NA otherwise. Format string for dates, eg “MM/DD/YYYY”.</li>
<li><strong>definition</strong>: Required for textDomain, NA otherwise. Definition for attributes that are a character string, matches attribute definition in most cases.</li>
<li><strong>unit</strong>: Required for numericDomain, NA otherwise. Unit string. If the unit is not a standard unit, a warning will appear when you create the attribute list, saying that it has been forced into a custom unit. Use caution here to make sure the unit really needs to be a custom unit. A list of standard units can be found here: <a href="https://knb.ecoinformatics.org/#external//emlparser/docs/eml-2.1.1/./eml-unitTypeDefinitions.html#StandardUnitDictionary" class="uri">https://knb.ecoinformatics.org/#external//emlparser/docs/eml-2.1.1/./eml-unitTypeDefinitions.html#StandardUnitDictionary</a></li>
<li><strong>numberType</strong>: Required for numericDomain, NA otherwise. Options are “real”, “natural”, “whole”, “integer”.
<ul>
<li><em>real</em>: positive and negative fractions and non fractions (…-1,-0.25,0,0.25,1…)</li>
<li><em>natural</em>: non-zero positive counting numbers (1,2,3…)</li>
<li><em>whole</em>: positive counting numbers and zero (0,1,2,3…)</li>
<li><em>integer</em>: positive and negative counting numbers and zero (…-2,-1,0,1,2…)</li>
</ul></li>
<li><strong>missingValueCode</strong>: Code for missing values (eg: ‘-999’, ‘NA’, ‘NaN’). NA otherwise. Note that an NA missing value code should be a string, ‘NA’, and numbers should also be strings, ‘-999.’</li>
<li><strong>missingValueCodeExplanation</strong>: Explanation for missing values, NA if no missing value code exists.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">attributes1 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(
    
    <span class="dt">attributeName =</span> <span class="kw">c</span>(<span class="st">&#39;Date&#39;</span>, <span class="st">&#39;Location&#39;</span>, <span class="st">&#39;Region&#39;</span>,<span class="st">&#39;Sample_No&#39;</span>, <span class="st">&#39;Sample_vol&#39;</span>, <span class="st">&#39;Salinity&#39;</span>, <span class="st">&#39;Temperature&#39;</span>, <span class="st">&#39;sampling_comments&#39;</span>),
    <span class="dt">attributeDefinition =</span> <span class="kw">c</span>(<span class="st">&#39;Date sample was taken on&#39;</span>, <span class="st">&#39;Location code representing location where sample was taken&#39;</span>,<span class="st">&#39;Region where sample was taken&#39;</span>, <span class="st">&#39;Sample number&#39;</span>, <span class="st">&#39;Sample volume&#39;</span>, <span class="st">&#39;Salinity of sample in PSU&#39;</span>, <span class="st">&#39;Temperature of sample&#39;</span>, <span class="st">&#39;comments about sampling process&#39;</span>),
    <span class="dt">measurementScale =</span> <span class="kw">c</span>(<span class="st">&#39;dateTime&#39;</span>, <span class="st">&#39;nominal&#39;</span>,<span class="st">&#39;nominal&#39;</span>, <span class="st">&#39;nominal&#39;</span>, <span class="st">&#39;ratio&#39;</span>, <span class="st">&#39;ratio&#39;</span>, <span class="st">&#39;interval&#39;</span>, <span class="st">&#39;nominal&#39;</span>),
    <span class="dt">domain =</span> <span class="kw">c</span>(<span class="st">&#39;dateTimeDomain&#39;</span>, <span class="st">&#39;enumeratedDomain&#39;</span>,<span class="st">&#39;enumeratedDomain&#39;</span>, <span class="st">&#39;textDomain&#39;</span>, <span class="st">&#39;numericDomain&#39;</span>, <span class="st">&#39;numericDomain&#39;</span>, <span class="st">&#39;numericDomain&#39;</span>, <span class="st">&#39;textDomain&#39;</span>),
    <span class="dt">formatString =</span> <span class="kw">c</span>(<span class="st">&#39;MM-DD-YYYY&#39;</span>, <span class="ot">NA</span>,<span class="ot">NA</span>,<span class="ot">NA</span>,<span class="ot">NA</span>,<span class="ot">NA</span>,<span class="ot">NA</span>,<span class="ot">NA</span>),
    <span class="dt">definition =</span> <span class="kw">c</span>(<span class="ot">NA</span>,<span class="ot">NA</span>,<span class="ot">NA</span>,<span class="st">&#39;Sample number&#39;</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="st">&#39;comments about sampling process&#39;</span>),
    <span class="dt">unit =</span> <span class="kw">c</span>(<span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>,<span class="st">&#39;milliliter&#39;</span>, <span class="st">&#39;dimensionless&#39;</span>, <span class="st">&#39;celsius&#39;</span>, <span class="ot">NA</span>),
    <span class="dt">numberType =</span> <span class="kw">c</span>(<span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>,<span class="ot">NA</span>, <span class="st">&#39;real&#39;</span>, <span class="st">&#39;real&#39;</span>, <span class="st">&#39;real&#39;</span>, <span class="ot">NA</span>),
    <span class="dt">missingValueCode =</span> <span class="kw">c</span>(<span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>,<span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="st">&#39;NA&#39;</span>),
    <span class="dt">missingValueCodeExplanation =</span> <span class="kw">c</span>(<span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>,<span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="st">&#39;no sampling comments&#39;</span>),
    
    <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p>Typing this out in R can be a bit of a pain, so you can import a table made in another program (such as Excel) as your attribute table - just make sure that rows are attributes and column names match the column names as listed above exactly (case is important). <code>attributes1 &lt;- read.csv('~/arctic-data/docs/training/EML/LakeSampleData.csv', stringsAsFactors = F)</code></p>
</div>
<div id="defining-enumerated-domains" class="section level2">
<h2><span class="header-section-number">5.2</span> Defining enumerated domains</h2>
<p>For attributes that are enumerated domains, a second table is needed with three columns: <code>attributeName</code>, <code>code</code>, and <code>definition</code>. <code>attributeName</code> is repeated for all codes belonging to a common attribute. To make things a little easier and less repetitve, coding wise, codes can be defined using named character vectors and then converted to a data frame. In this example, there are two enumerated domains in the attribute list - “Location” and “Region”</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Location &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">CASC =</span> <span class="st">&#39;Cascade Lake&#39;</span>, <span class="dt">CHIK =</span> <span class="st">&#39;Chikumunik Lake&#39;</span>, <span class="dt">HEAR =</span> <span class="st">&#39;Heart Lake&#39;</span>, <span class="dt">NISH =</span> <span class="st">&#39;Nishlik Lake&#39;</span> )
Region &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">W_MTN =</span> <span class="st">&#39;West region, locations West of Eagle Mountain&#39;</span>, <span class="dt">E_MTN =</span> <span class="st">&#39;East region, locations East of Eagle Mountain&#39;</span>)</code></pre></div>
<p>The definitions are then written into a dataframe using the names of the named character vectors, and their definitions.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">factors1 &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">data.frame</span>(<span class="dt">attributeName =</span> <span class="st">&#39;Location&#39;</span>, <span class="dt">code =</span> <span class="kw">names</span>(Location), <span class="dt">definition =</span> <span class="kw">unname</span>(Location)),
                  <span class="kw">data.frame</span>(<span class="dt">attributeName =</span> <span class="st">&#39;Region&#39;</span>, <span class="dt">code =</span> <span class="kw">names</span>(Region), <span class="dt">definition =</span> <span class="kw">unname</span>(Region)))
factors1</code></pre></div>
<pre><code>##   attributeName  code                                    definition
## 1      Location  CASC                                  Cascade Lake
## 2      Location  CHIK                               Chikumunik Lake
## 3      Location  HEAR                                    Heart Lake
## 4      Location  NISH                                  Nishlik Lake
## 5        Region W_MTN West region, locations West of Eagle Mountain
## 6        Region E_MTN East region, locations East of Eagle Mountain</code></pre>
<p>This table can also be generated using a different program, such as Excel, and imported to R as a .csv, similar to what can be done with the attribute table.</p>
</div>
<div id="generating-the-attribute-list-and-data-table" class="section level2">
<h2><span class="header-section-number">5.3</span> Generating the attribute list and data table</h2>
<p>Next the attributeList is generated from the attributes and the factors using the function <code>set_attributes</code>. This puts all of the information from the attribute <code>data.frame</code> and the factor <code>data.frame</code> defining the enumerated domains into the slotted EML schema.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">attributeList1 &lt;-<span class="st"> </span><span class="kw">set_attributes</span>(attributes1, <span class="dt">factors =</span> factors1) </code></pre></div>
<p>Now the physical aspects of the data table, like its name, identifier (PID), header lines, and delimiter, need to be described. The function <code>set_physical</code> does this. See <code>?set_physical</code> for more options on what can be set in the physical element. One of the more important items to set here is the URL, which points to the newest version of the data object using the object’s PID.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">id1 &lt;-<span class="st"> &#39;PID1&#39;</span> <span class="co">#this should be an actual PID</span>
path &lt;-<span class="st"> &#39;~/arctic-data/docs/training/EML/LakeSampleData.csv&#39;</span> <span class="co">#path to data table</span>
physical1 &lt;-<span class="st"> </span><span class="kw">set_physical</span>(<span class="st">&#39;LakeSampleData.csv&#39;</span>, 
                          <span class="dt">id =</span> id1, 
                          <span class="dt">size =</span> <span class="kw">as.character</span>(<span class="kw">file.size</span>(path)), 
                          <span class="dt">sizeUnit =</span> <span class="st">&#39;bytes&#39;</span>,
                          <span class="dt">authentication =</span> <span class="kw">digest</span>(path, <span class="dt">algo=</span><span class="st">&quot;sha1&quot;</span>, <span class="dt">serialize=</span><span class="ot">FALSE</span>, <span class="dt">file=</span><span class="ot">TRUE</span>), 
                          <span class="dt">authMethod =</span> <span class="st">&#39;SHA-1&#39;</span>,
                          <span class="dt">numHeaderLines =</span> <span class="st">&#39;1&#39;</span>, 
                          <span class="dt">fieldDelimiter =</span> <span class="st">&#39;,&#39;</span>,
                          <span class="dt">url =</span> <span class="kw">paste0</span>(<span class="st">&#39;https://cn.dataone.org/cn/v2/resolve/&#39;</span>, id1))</code></pre></div>
<p>If the object is already on the Arctic Data Center, the physical section is very easy to write using its PID and the <code>pid_to_eml_physical</code> function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">id1 &lt;-<span class="st"> &#39;PID1&#39;</span> <span class="co">#this should be an actual PID</span>
cn &lt;-<span class="st"> </span><span class="kw">CNode</span>(<span class="st">&#39;PROD&#39;</span>)
mn &lt;-<span class="st"> </span><span class="kw">getMNode</span>(cn,<span class="st">&#39;urn:node:ARCTIC&#39;</span>)
physical1 &lt;-<span class="st"> </span><span class="kw">pid_to_eml_physical</span>(mn, id1)</code></pre></div>
<p>REMEMBER, if we are working in the test environment, we set it this way:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cn &lt;-<span class="st"> </span><span class="kw">CNode</span>(<span class="st">&#39;STAGING&#39;</span>)
mn &lt;-<span class="st"> </span><span class="kw">getMNode</span>(cn,<span class="st">&#39;urn:node:mnTestARCTIC&#39;</span>)</code></pre></div>
<p>Be very careful about what you publish on the production node (PROD, or arcticdata.io). This node should NEVER be used to publish test or training datasets. While going through training for the first time you should be using the test environment (STAGING, or test.articdata.io).</p>
<p>The <code>physical1</code> and <code>attributeList1</code> elements are then used to create the <code>dataTable</code>, along with the name of the <code>dataTable</code> and its description.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dataTable1 &lt;-<span class="st"> </span><span class="kw">new</span>(<span class="st">&#39;dataTable&#39;</span>,
                  <span class="dt">entityName =</span> <span class="st">&#39;LakeSampleData.csv&#39;</span>,
                  <span class="dt">entityDescription =</span> <span class="st">&#39;Water sample temperature and salinity from the Eagle Mountain region&#39;</span>,
                  <span class="dt">physical =</span> physical1,
                  <span class="dt">attributeList =</span> attributeList1)</code></pre></div>
</div>
<div id="adding-a-second-datatable" class="section level2">
<h2><span class="header-section-number">5.4</span> Adding a second dataTable</h2>
<p>If the metadata document describes multiple Data Objects, a new set of attributes, attribute list, physical description, and dataTable can be created just as in the example above.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">attributes2 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">attributeName =</span> <span class="kw">c</span>(<span class="st">&#39;Time&#39;</span>, <span class="st">&#39;Wind_Speed&#39;</span>),
                          <span class="dt">attributeDefinition =</span> <span class="kw">c</span>(<span class="st">&#39;Date and time of wind speed reading&#39;</span>, <span class="st">&#39;Measured wind speed&#39;</span>),
                          <span class="dt">measurementScale =</span> <span class="kw">c</span>(<span class="st">&#39;dateTime&#39;</span>, <span class="st">&#39;ratio&#39;</span>),
                          <span class="dt">domain =</span> <span class="kw">c</span>(<span class="st">&#39;dateTimeDomain&#39;</span>, <span class="st">&#39;numericDomain&#39;</span>),
                          <span class="dt">formatString =</span> <span class="kw">c</span>(<span class="st">&#39;YYYY-MM-DD hh:mm:ss&#39;</span>, <span class="ot">NA</span>),
                          <span class="dt">definition =</span> <span class="kw">c</span>(<span class="ot">NA</span>, <span class="ot">NA</span>),
                          <span class="dt">unit =</span> <span class="kw">c</span>(<span class="ot">NA</span>, <span class="st">&#39;metersPerSecond&#39;</span>),
                          <span class="dt">numberType =</span> <span class="kw">c</span>(<span class="ot">NA</span>, <span class="st">&#39;real&#39;</span>),
                          <span class="dt">missingValueCode =</span> <span class="kw">c</span>(<span class="ot">NA</span>, <span class="ot">NA</span>),
                          <span class="dt">codeExplanation =</span> <span class="kw">c</span>(<span class="ot">NA</span>, <span class="ot">NA</span>),
                          <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)
attributeList2 &lt;-<span class="st"> </span><span class="kw">set_attributes</span>(attributes2)
id2 &lt;-<span class="st"> &#39;PID2&#39;</span>
physical2 &lt;-<span class="st"> </span><span class="kw">pid_to_eml_physical</span>(mn, id2)
dataTable2 &lt;-<span class="st"> </span><span class="kw">new</span>(<span class="st">&#39;dataTable&#39;</span>, 
                  <span class="dt">entityName =</span> <span class="st">&#39;EagleMtnWindData.csv&#39;</span>, 
                  <span class="dt">entityDescription =</span> <span class="st">&#39;Wind data from Eagle Mountain&#39;</span>, 
                  <span class="dt">physical =</span> physical2, 
                  <span class="dt">attributeList =</span> attributeList2)</code></pre></div>
<p>Now both <code>dataTable1</code> and <code>dataTable2</code> are added to the original EML using the <code>c()</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">eml@dataset@dataTable &lt;-<span class="st"> </span><span class="kw">c</span>(dataTable1, dataTable2)</code></pre></div>
</div>
<div id="defining-custom-units" class="section level2">
<h2><span class="header-section-number">5.5</span> Defining custom units</h2>
<p>If you get a warning message about your units not being in the standard unit list, a custom unit list needs to be created and added to the additionalMetadata slot of the EML. First we create a custom unit data frame with columns <code>id</code> (the name of the unit, as it appears in the attribute table), <code>unitType</code>, and <code>parentSI</code>. Each custom unit has a row in the data frame. To determine what the unitType and parentSI are for each unit, it may be helpful to reference the list of custom units. This list can easily be viewed in your R console using these commands:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">standardUnits &lt;-<span class="st"> </span><span class="kw">get_unitList</span>()
<span class="kw">View</span>(standardUnits$units)</code></pre></div>
<p>The following lines create the standard unit data table, use the function <code>set_unitList</code> to slot it into the EML, and then add it as addionalMetadata to the EML.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">custom_units &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">id =</span> <span class="kw">c</span>(<span class="st">&#39;horsepower&#39;</span>, <span class="st">&#39;gallonPerMinute&#39;</span>), 
                           <span class="dt">unitType =</span> <span class="kw">c</span>(<span class="st">&#39;power&#39;</span>, <span class="st">&#39;volumetricRate&#39;</span>), 
                           <span class="dt">parentSI =</span> <span class="kw">c</span>(<span class="st">&#39;watt&#39;</span>, <span class="st">&#39;litersPerSecond&#39;</span>))
unitlist &lt;-<span class="st"> </span><span class="kw">set_unitList</span>(custom_units)
eml@additionalMetadata &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">as</span>(unitlist, <span class="st">&quot;additionalMetadata&quot;</span>))</code></pre></div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="setting-other-entities.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
